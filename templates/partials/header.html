{% load static %}

{% block CSS %}
    <link rel="stylesheet" href="{% static 'assets/css/_base.css' %}">

    <!-- Vendor CSS -->
    <link rel="stylesheet" href="{% static 'assets/css/vendor.css' %}">

    <!-- style css -->
    <link rel="stylesheet" href="{% static 'assets/css/main.css' %}">
{% endblock CSS %}

<style>
    .header-inner.fixed-header {
    background-color: #fff8ee !important; /* رنگ نارنجی ملایم */
    border-bottom: 1px solid #ffe5c9;   /* یک خط جداکننده ظریف در پایین هدر */

        /* این دو خط جدید را برای منحنی کردن گوشه‌ها اضافه کنید */
    border-bottom-left-radius: 65px;
    border-bottom-right-radius: 65px;
}
</style>

<header class="header">
    <div class="header-inner fixed-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-xl-9 col-lg-8 col-5 col-xs-0 col-none col-sm-block p-0">
                    <nav class="main-navigation">
                        <div class="site-branding" style="margin-right: 30px;">
                            <a href="index.html" class="logo">
                                <figure class="logo--normal d-none d-sm-block">
                                    {% comment %} <img class="px-5" src="{% static 'assets/img/codingyar_logo.png' %}" style="max-height: 50px; margin-bottom: -15px;" alt="Logo"> {% endcomment %}
                                    <i class="bi bi-shop" style="font-size: 5rem;"></i>
                                </figure>
                            </a>
                        </div>
                        <div class="mainmenu-nav d-none d-lg-block w-100 pr-3">
                            <ul class="mainmenu d-lg-flex jusity-content-end jusity-content-lg-start pt-4">
                                <li class="mainmenu__item menu-item-has-children active">
                                    <a href="{% url 'product_list' %}" class="mainmenu__link">
                                        <span class="mm-text">خانه</span>
                                    </a>
                                </li>
                                <li class="mainmenu__item menu-item-has-children">
                                    <a href="Blog.html" class="mainmenu__link">
                                        <span class="mm-text">وبلاگ</span>
                                    </a>
                                </li>
                                <li class="mainmenu__item menu-item-has-children">
                                    <a href="#" class="mainmenu__link">
                                        <span class="mm-text">صفحات</span>
                                    </a>
                                    </li>
                                <li class="mainmenu__item">
                                    <a href="contact-us.html" class="mainmenu__link">
                                        <span class="mm-text">تماس با ما</span>
                                    </a>
                                </li>
                                {% if user.is_authenticated %}
                                    <li class="mainmenu__item">
                                        <a href="{% url 'account_logout' %}" class="mainmenu__link">
                                            <span class="mm-text">خروج</span>
                                        </a>
                                    </li>
                                {% else %}
                                    <li class="mainmenu__item">
                                        <a href="{% url 'account_login' %}" class="mainmenu__link">
                                            <span class="mm-text"> ورود </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'account_signup' %}" class="text-right" href="my-account.html"> ثبت نام</a>
                                    </li>
                                {% endif %}
                            </ul>
                        </div>
                    </nav>
                </div>
                <div class="col-xl-3 col-lg-4 col-sm-7 col-12 p-0">
                    <ul class="header-toolbar">
                        <li class="header-toolbar__item">
                            <a href="wishlist.html" class="header-toolbar__btn mx-4">
                                {% comment %} <i class="flaticon flaticon-like"></i> {% endcomment %}
                                <i class="bi bi-heart-fill"></i>
                            </a>
                        </li>
                        <li class="header-toolbar__item mini-cart-item">
                            <a href="{% url 'cart:cart_detail' %}" class="header-toolbar__btn toolbar-btn mini-cart-btn">
                                {% comment %} <i class="flaticon flaticon-shopping-cart"></i> {% endcomment %}
                                <i class="bi bi-cart3"></i>
                                    <sup class="mini-cart-count">{{cart|length}}</sup>
                            </a>
                        </li>
                        <li class="header-toolbar__item user-info">
                            <a href="my-account.html" class="header-toolbar__btn">
                                {% comment %} <i class="flaticon flaticon-user"></i> {% endcomment %}
                                <i class="bi bi-person-fill"></i>
                            </a>
                            <ul class="user-info-menu">
                                <li>
                                    <a class="text-right" href="my-account.html">حساب کاربری</a>
                                    <a class="text-right" href="order-tracking.html">تاریخچه سفارشات</a>
                                </li>
                            </ul>
                        </li>
                        <li class="header-toolbar__item">
                            <a href="#" id="search-icon" class="header-toolbar__btn toolbar-btn">
                                {% comment %} <i class="flaticon flaticon-search"></i> {% endcomment %}
                                <i class="bi bi-search"></i>
                            </a>
                            <div id="search-form-container" style="display: none;">
                                <form method="GET" action="{% url 'product_list' %}" class="d-flex">
                                    <input class="form-control me-2" type="text" name="search" placeholder="جستجو...">
                                    <button class="btn  btn-outline-success" type="submit">برو</button>
                                </form>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="mobile-menu"></div>
                </div>
            </div>
        </div>
    </div>
</header>
<!-- Header End -->
{% block scripts %}
    <script>
        // منتظر بمان تا کل صفحه HTML بارگذاری شود
        document.addEventListener('DOMContentLoaded', function() {

            // ۱. المان‌های آیکون و فرم را پیدا کن
            const searchIcon = document.getElementById('search-icon');
            const searchFormContainer = document.getElementById('search-form-container');
            const searchInput = searchFormContainer.querySelector('input[name="search"]');

            // ۲. یک Event Listener برای کلیک روی آیکون اضافه کن
            searchIcon.addEventListener('click', function(event) {
                // جلوگیری از رفتار پیش‌فرض لینک (که رفتن به بالای صفحه است)
                event.preventDefault();

                // ۳. وضعیت نمایش فرم را تغییر بده (toggle)
                if (searchFormContainer.style.display === 'none') {
                    searchFormContainer.style.display = 'block'; // یا 'flex' اگر از فلکس‌باکس استفاده می‌کنید
                    // وقتی فرم باز شد، به صورت خودکار روی فیلد ورودی فوکوس کن
                    searchInput.focus();
                } else {
                    searchFormContainer.style.display = 'none';
                }
            });
        });
    </script>
{% endblock scripts %}